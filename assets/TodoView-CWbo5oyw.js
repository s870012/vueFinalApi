import{u as T,c,o as u,a as t,b as g,w as k,d as C,e as h,R as m,f as d,g as p,h as A,r as y,i as z,j as N,v as V,F as B,k as M,t as b}from"./index-CB7m99Jk.js";const O={class:"todo_sm"},D={__name:"TheHeader",props:["token"],setup(f){const a="https://todolist-api.hexschool.io/",v=T(),i=f,n=async()=>{try{await p.post(`${a}users/sign_out`,null,{headers:{Authorization:i.token}}),document.cookie="TodoToken=; expires=Thu, 01 Jan 1970 00:00:00 GMT; path=/",v.push("/")}catch(l){console.log(l)}};return(l,r)=>(u(),c("header",null,[t("nav",null,[t("h1",null,[g(h(m),{to:"/"},{default:k(()=>[...r[0]||(r[0]=[C("ONLINE TODO LIST",-1)])]),_:1})]),t("ul",null,[t("li",O,[g(h(m),{to:"/todo"},{default:k(()=>[...r[1]||(r[1]=[t("span",null,"的代辦",-1)])]),_:1})]),t("li",null,[t("a",{href:"#loginPage",onClick:d(n,["prevent"])},"登出")])])])]))}},F="/vueFinalApi/assets/empty%201-Cd2iwVpU.png",P={id:"todoListPage",class:"bg-half"},R={class:"container todoListPage vhContainer"},j={class:"todoList_Content"},E={class:"inputBox"},I={key:0},S=["src"],U={key:1,class:"todoList_list"},Y={class:"todoList_tab"},G={class:"todoList_items"},H={class:"todoList_item"},J={class:"todoList_label"},q=["onClick","disabled"],K=["onClick"],Q={class:"todoList_statistics"},X={__name:"TodoView",setup(f){const a="https://todolist-api.hexschool.io/",v=T(),i=document.cookie.replace(/(?:^|.*;\s*)TodoToken\s*=\s*([^;]*).*$/i,"$1");A(async()=>{try{await p.get(`${a}users/checkout`,{headers:{Authorization:i}}),l()}catch(s){console.log("錯誤",s),v.push("/")}});const n=y([]),l=async s=>{try{const o=await p.get(`${a}todos/`,{headers:{Authorization:i}});n.value=o.data.data,s==="finish"?n.value=n.value.filter(e=>e.status!==!1):s==="finishYet"&&(n.value=n.value.filter(e=>e.status!==!0))}catch(o){console.log(o)}},r=z(()=>n.value.filter(s=>s.status!==!0).length),_=y({content:""}),$=async s=>{try{await p.post(`${a}todos/`,s,{headers:{Authorization:i}}),l(),s.content=""}catch(o){console.log(o)}},x=async s=>{try{await p.delete(`${a}todos/${s}`,{headers:{Authorization:i}}),l()}catch(o){console.log(o)}},L=async s=>{try{const o=await p.patch(`${a}todos/${s.id}/toggle`,null,{headers:{Authorization:i}});s.status=o.data.status}catch(o){console.log(o)}};return(s,o)=>(u(),c("div",P,[g(D,{token:h(i)},null,8,["token"]),t("div",R,[t("div",j,[t("div",E,[N(t("input",{type:"text",placeholder:"請輸入待辦事項","onUpdate:modelValue":o[0]||(o[0]=e=>_.value.content=e)},null,512),[[V,_.value.content]]),t("a",{href:"#",onClick:o[1]||(o[1]=d(e=>$(_.value),["prevent"]))},[...o[4]||(o[4]=[t("i",{class:"bi bi-plus-lg"},null,-1)])])]),n.value.length<1?(u(),c("div",I,[o[5]||(o[5]=t("p",{class:"text-center fs-5 mt-5 mb-4"},"目前無代辦事項",-1)),t("img",{src:h(F),alt:"",class:"w-auto d-block mx-auto object-fit-cover"},null,8,S)])):(u(),c("div",U,[t("ul",Y,[t("li",null,[t("a",{href:"#",class:"active",onClick:d(l,["prevent"])},"全部")]),t("li",null,[t("a",{href:"#",onClick:o[2]||(o[2]=d(e=>l("finishYet"),["prevent"]))},"待完成")]),t("li",null,[t("a",{href:"#",onClick:o[3]||(o[3]=d(e=>l("finish"),["prevent"]))},"已完成")])]),t("div",G,[t("ul",H,[(u(!0),c(B,null,M(n.value,e=>(u(),c("li",{key:e.id},[t("label",J,[t("input",{class:"todoList_input",type:"checkbox",onClick:w=>L(e),disabled:e.status===!0},null,8,q),t("span",null,b(e.content),1)]),t("button",{type:"button",class:"btn",onClick:d(w=>x(e.id),["prevent"])},[...o[6]||(o[6]=[t("i",{class:"bi bi-x-lg"},null,-1)])],8,K)]))),128))]),t("div",Q,[t("p",null,b(r.value)+" 個待完成項目",1)])])]))])])]))}};export{X as default};
